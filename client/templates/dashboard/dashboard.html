<template name='trailGuideDashboard'>
  <div class='container-fluid '>
    <div class='row text-center'>
      <h1><i class="fa fa-map-signs" aria-hidden="true"></i> Trail Guide</h1>
    </div>
    <div class='row filters text-center'>
      <a class="btn btn-default" role="button" data-toggle="collapse" href="#orderFilters" aria-expanded="false" aria-controls="orderFilters">Filters</a>
    </div>
    <div class="collapse" id="orderFilters">
      <div class="well text-center">
        <div class='row'>
          <div class='col-xs-3'>
            <form class='form-inline'>
                <div class="form-group">
                  <label for="limitFilter">Limit:</label>
                  <input type="number" id='limitFilter' min="1" class="form-control limitFilter" value={{currentLimit}} name="limit">
                </div>
            </form>
          </div>
          <div class='col-xs-9'>
            <div class='row'>
            {{#each displayFields}}
              <div class='col-xs-2'>
                <div class="checkbox">
                  <label>
                    <input name='{{this}}' class='toggleDisplayField' id='{{this}}' checked="{{fields this}}" type="checkbox"> {{this}}
                  </label>
                </div>
              </div>
            {{/each}}
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class='row text-center'>
      <h3>Orders</h3>
    </div>
    <div class='row'>
      <table class='table table-hover table-condensed trail-guide-table'>
        {{#if fields 'orderNumber'}}<colgroup class='{{sortingBy "orderNumber"}}'></colgroup>{{/if}}
        {{#if fields 'customer'}}<colgroup ></colgroup>{{/if}}
        {{#if fields 'contact'}}<colgroup></colgroup>{{/if}}
        {{#if fields 'total'}}<colgroup class='{{sortingBy "billing.invoice.total"}}'></colgroup>{{/if}}
        {{#if fields 'createdAt'}}<colgroup class='{{sortingBy "createdAt"}}'></colgroup>{{/if}}
        <colgroup class='{{sortingBy "advancedFulfillment.transitTime"}}'></colgroup>
        <colgroup class='{{sortingBy "advancedFulfillment.shipmentDate"}}'></colgroup>
        <colgroup class='{{sortingBy "startTime"}}'></colgroup>
        <colgroup class='{{sortingBy "endTime"}}'></colgroup>
        <colgroup class='{{sortingBy "advancedFulfillment.returnDate"}}'></colgroup>
        <colgroup class='{{sortingBy "rentalDays"}}'></colgroup>
        <colgroup class='{{sortingBy "shipping.address.region"}}'></colgroup>
        <colgroup class='{{sortingBy "billing.address.region"}}'></colgroup>
        <colgroup class='{{sortingBy "advancedFulfillment.workflow.status"}}'></colgroup>
        <thead>
          <tr>
            {{#if fields 'orderNumber'}}<th data-field='orderNumber' class='sortField'>{{{upOrDown 'orderNumber'}}}#</th>{{/if}}
            {{#if fields 'customer'}}<th>Customer</th>{{/if}}
            {{#if fields 'contact'}}<th>Contact</th>{{/if}}
            {{#if fields 'total'}}<th data-field='billing.invoice.total' class='sortField'>{{{upOrDown 'billing.invoice.total'}}}Total</th>{{/if}}
            {{#if fields 'createdAt'}}<th data-field='createdAt' class='sortField'>{{{upOrDown 'createdAt'}}}Placed</th>{{/if}}
            <th data-field='advancedFulfillment.transitTime' class='sortField'>{{{upOrDown 'advancedFulfillment.transitTime'}}}Transit</th>
            <th data-field='advancedFulfillment.shipmentDate' class='sortField'>{{{upOrDown 'advancedFulfillment.shipmentDate'}}}Shipping</th>
            <th data-field='startTime' class='sortField'>{{{upOrDown 'startTime'}}}Rental Start</th>
            <th data-field='endTime' class='sortField'>{{{upOrDown 'endTime'}}}Rental End</th>
            <th data-field='advancedFulfillment.returnDate' class='sortField'>{{{upOrDown 'advancedFulfillment.returnDate'}}}Rental End</th>
            <th data-field='rentalDays' class='sortField'>{{{upOrDown 'rentalDays'}}}Length</th>
            <th data-field='shipping.address.region' class='sortField'>{{{upOrDown 'shipping.address.region'}}}Ship To</th>
            <th data-field='billing.address.region' class='sortField'>{{{upOrDown 'billing.address.region'}}}Bill To</th>
            <th data-field='advancedFulfillment.workflow.status' class='sortField'>{{{upOrDown 'advancedFulfillment.workflow.status'}}}Status</th>

          </tr>
        </thead>
        <tbody>
          {{#each orders}}
            <tr>
              {{#if fields 'orderNumber'}}<td>{{orderNumber}}</td>{{/if}}
              {{#if fields 'customer'}}<td>{{customer}}</td>{{/if}}
              {{#if fields 'contact'}}<td>{{{contactInfo}}}</td>{{/if}}
              {{#if fields 'total'}}<td>${{total}}</td>{{/if}}
              {{#if fields 'createdAt'}}<td>{{clearDate createdAt}}</td>{{/if}}
              <td>{{advancedFulfillment.transitTime}}</td>
              <td>{{clearDate advancedFulfillment.shipmentDate}}</td>
              <td>{{clearDate startTime}}</td>
              <td>{{clearDate endTime}}</td>
              <td>{{clearDate advancedFulfillment.returnDate}}</td>
              <td>{{rentalDays}}</td>
              <td>{{region 'shipping'}}</td>
              <td>{{region 'billing'}}</td>
              <td>{{humanizeStatus}}</td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  </div>
</template>
